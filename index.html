<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MC3 AUTO PARTS Inventory</title>
<style>
    body {
        font-family: Arial;
        background: #0f0f0f;
        color: #fff;
        padding: 20px;
    }
    h1, h3 { text-align: center; }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        background: #1b1b1b;
        font-size: 15px;
    }
    th, td {
        border: 1px solid #333;
        padding: 8px;
    }
    th {
        background: #333;
        color: #fff;
    }
    input[type="text"], input[type="number"] {
        width: 100%;
        padding: 6px;
        background: #222;
        color: #fff;
        border: 1px solid #444;
    }
    #search {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        font-size: 16px;
        background: #222;
        border: 1px solid #444;
        color: #fff;
    }
    .btn {
        background: #00ff99;
        color: #000;
        border: none;
        padding: 12px 18px;
        font-weight: bold;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px 5px 20px 0;
    }
    .btn-red {
        background: #ff4444;
        color: white;
    }
</style>
</head>
<body>

<h1>MC3 AUTO PARTS</h1>
<h3>Online Inventory • Cabin / Air / Oil Filters</h3>

<input type="text" id="search" placeholder="Search Code, Brand, Model, Type…">

<button class="btn" onclick="addItem()">ADD ITEM</button>
<button class="btn" onclick="saveInventory()">SAVE CHANGES</button>

<table id="inventoryTable">
    <thead>
        <tr>
            <th>Code</th>
            <th>Type</th>
            <th>Brand</th>
            <th>Fitment</th>
            <th>Stock</th>
            <th>Retail ₱</th>
            <th>Wholesale ₱</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
// ------------------------------
// DEFAULT INVENTORY
// ------------------------------
let inventory = [
    {
        code: "1500A608",
        type: "AIR",
        brand: "MITSUBISHI",
        fitment: "Montero Sport 2016–2021 | Strada 2018–Present | L200/Triton 2016–Present",
        stock: 46,
        retail: 150,
        wholesale: 130
    },
    {
        code: "1500A617",
        type: "AIR",
        brand: "MITSUBISHI",
        fitment: "Mirage G4 2012–2021 | Mirage Hatchback 2012–2019",
        stock: 20,
        retail: 98,
        wholesale: 90
    },
    {
        code: "17801-0L040",
        type: "AIR",
        brand: "TOYOTA",
        fitment: "Fortuner 2015–Present | Innova 2016–Present | Hilux 2015–Present",
        stock: 28,
        retail: 162.5,
        wholesale: 150
    },
    {
        code: "17801-0Y040",
        type: "AIR",
        brand: "TOYOTA",
        fitment: "Mirage 2013–2019 | Sienta 2016–2019 | Vios/Yaris 2014–2019",
        stock: 0,
        retail: 105,
        wholesale: 95
    }
];

// LOAD SAVED VERSION
if (localStorage.getItem("mc3inventory")) {
    inventory = JSON.parse(localStorage.getItem("mc3inventory"));
}

// UPDATE INVENTORY VALUES
function update(i, key, value) {
    inventory[i][key] = value;
}

// DELETE ITEM
function deleteItem(i) {
    if (confirm("Delete this item?")) {
        inventory.splice(i, 1);
        renderTable();
    }
}

// ADD ITEM BUTTON
function addItem() {
    inventory.push({
        code: "",
        type: "",
        brand: "",
        fitment: "",
        stock: 0,
        retail: 0,
        wholesale: 0
    });
    renderTable();
}

// SAVE BUTTON
function saveInventory() {
    localStorage.setItem("mc3inventory", JSON.stringify(inventory));
    alert("Inventory Saved!");
}

// RENDER TABLE
function renderTable() {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    inventory.forEach((item, i) => {
        tbody.innerHTML += `
        <tr>
            <td><input type="text" value="${item.code}" onchange="update(${i}, 'code', this.value)"></td>
            <td><input type="text" value="${item.type}" onchange="update(${i}, 'type', this.value)"></td>
            <td><input type="text" value="${item.brand}" onchange="update(${i}, 'brand', this.value)"></td>
            <td><input type="text" value="${item.fitment}" onchange="update(${i}, 'fitment', this.value)"></td>
            <td><input type="number" value="${item.stock}" onchange="update(${i}, 'stock', this.value)"></td>
            <td><input type="number" value="${item.retail}" onchange="update(${i}, 'retail', this.value)"></td>
            <td><input type="number" value="${item.wholesale}" onchange="update(${i}, 'wholesale', this.value)"></td>
            <td><button class="btn-red" onclick="deleteItem(${i})">X</button></td>
        </tr>
        `;
    });
}

// FIXED SEARCH FUNCTION
document.getElementById("search").addEventListener("keyup", () => {
    let filter = document.getElementById("search").value.toLowerCase();
    let rows = document.querySelectorAll("#inventoryTable tbody tr");

    rows.forEach(row => {
        let text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
    });
});

renderTable();
</script>

</body>
</html>
